<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Formulaire de saisie Client</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/tp01.css">
    <script type="text/javascript" src="js/jquery-3.7.1.js"></script>
 </head>
<body>

<div id="main" class="row">
    <div class="col-lg-8 offset-lg-2 col-12 p-4">
        <h1>Compte client</h1>
        <form id="Compteclient" method="get" action="">
            <fieldset>
                <legend>Saisie des informations</legend>            
                <div class="form-group pt-3">
                    <div class="row">
                        <div class="col-md-6">     
                            <label for="nom" class="form-label">NOM :</label>
                            <input type="text" id="nom" name="nom" placeholder="Ex. : DUPONT" required minlength="1" maxlength="50" size="20" class="form-control form-control-sm"/>
                        </div>
                        <div class="col-md-6">
                            <label for="prenom" class="form-label">Prénom :</label>
                            <input type="text" id="prenom" name="prenom" placeholder="Ex. : Louis" required minlength="1" maxlength="50" size="20" class="form-control form-control-sm"/>
                        </div>
                    </div>
                </div>
                
                <div class="form-group pt-3">
                    <label for="adresse" class="form-label">Adresse :</label>
                    <input type="text" id="adresse" name="adresse" placeholder="Numéro et voie" required minlength="1" maxlength="99" size="10" class="form-control form-control-sm"/>
                </div>
                
                <div class="form-group pt-3">
                    <div class="row">
                        <div class="col-md-6">
                            <label for="cp" class="form-label">Code Postal :</label>
                            <input type="text" id="cp" name="cp" placeholder="Ex. : 67000" required minlength="5" maxlength="5" size="10" class="form-control form-control-sm"/>
                        </div>
                        <div class="col-md-6">
                            <label for="ville" class="form-label">Ville :</label>
                            <input type="text" id="ville" name="ville" placeholder="Ex. : Strasbourg" required minlength="1" maxlength="99" size="10" class="form-control form-control-sm"/>
                        </div>
                    </div>
                </div>

               
                <div class="form-group pt-3">
                    <label for="telephone" class="form-label">Téléphone :</label>
                    <input type="tel" id="telephone" name="telephone" placeholder="Ex. : 0123456789" required minlength="10" maxlength="10" size="10" class="form-control form-control-sm"/>
                </div>

                <div class="form-group pt-3">
                    <label for="courriel" class="form-label">Email :</label>
                    <input type="email" id="courriel" name="courriel" placeholder="Ex. : adressemail@gmail.com" required minlength="1" maxlength="99" size="10" class="form-control form-control-sm"/>
                </div>
                
                <div class="form-group pt-3" class="form-label">
                    Civilité : 
                    <input type="radio" name="civilite" value="femme" id="civilitefemme" class="form-check-input"> <label for="civilitefemme" class="form-check-label">Femme</label>
                    <input type="radio" name="civilite" value="homme" id="civilitehomme" class="form-check-input"> <label for="civilitehomme" class="form-check-label">Homme</label>
                    <input type="radio" name="civilite" value="autre" id="civiliteautre" class="form-check-input"> <label for="civiliteautre" class="form-check-label">Autre</label>
                </div>
                <div class="col-6">
                    <div class="form-group mb-3 pt-3">
                        <label for="login" class="form-label">Identifiant :</label>
                        <input type="text" id="login" name="login" required minlength="1" maxlength="99" size="10" class="form-control form-control-sm"/>
                    </div>
                </div>

                <div class="col-6">
                    <div class="form-group mb-3">
                        <label for="mdp" class="form-label">Mot de passe :</label>
                        <input type="password" id="mdp" name="mdp" required minlength="1" maxlength="99" size="10" class="form-control form-control-sm"/>
                    </div>
                </div>
                 <div class="col-6">
                    <div class="form-group mb-3">
                        <label for="confirmmdp" class="form-label">Confirmation mot de passe :</label>
                        <input type="password" id="confirmmdp" name="confirmmdp" required minlength="1" maxlength="99" size="10" class="form-control form-control-sm"/>
                    </div>
                </div>
                <div class = "boutton">
                    <button type="submit" id="envoiformulaire" class="btn btn-primary">Envoyer</button>
                </div>
            </fieldset>
        </form>
        

     </div>
</div>
    
<script type="text/javascript">
    
    // CODE POSTAL
    const cpInput = document.querySelector("#cp");
    const regexcp = /^[0-9]{5}$/; //vérifie que le CP à la syntaxe française
    function verifyPostalCode() {
      const cp = cpInput.value;
      if (!regexcp.test(cp)) {
        // Le CP est invalide
        cpInput.setCustomValidity("Le CODE POSTAL doit être composé de 5 chiffres");
        return false;
      } else {
        // Le CP est valide
        cpInput.setCustomValidity("");
        return true;
      }
    }
    cpInput.addEventListener("keyup", verifyPostalCode);
    
    // TELEPHONE
    const telephoneInput = document.querySelector("#telephone");
    const regextel = /^0[1-9]{1}[0-9]{8}$/; //Vérifie que le TELEPHONE a la syntaxe française
    function verifyPhoneNumber() {
      const telephone = telephoneInput.value;
      if (!regextel.test(telephone)) {
        // Le TELEPHONE est invalide
        telephoneInput.setCustomValidity("Le numéro de TÉLÉPHONE doit être au format 0612345678");
        return false;
      } else {
        // Le TELEPHONE est valide
        telephoneInput.setCustomValidity("");
        return true;
      }
    }
    telephoneInput.addEventListener("keyup", verifyPhoneNumber);
    
    // EMAIL
    const emailInput = document.querySelector("#courriel");
    const regexemail = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-z]{2,6}$/;
    function verifyEmail() {
      const email = emailInput.value;
      if (!regexemail.test(email)) {
        // L'adresse e-mail est invalide
        emailInput.setCustomValidity("L'adresse E-MAIL doit être valide");
        return false;
      } else {
        // L'adresse e-mail est valide
        emailInput.setCustomValidity("");
        return true;
      }
    }
    emailInput.addEventListener("keyup", verifyEmail);
    
    // MDP CONFIRMATION
    const passwordInput = document.querySelector("#mdp");
    const passwordConfirmInput = document.querySelector("#confirmmdp");
    function verifyPasswordConfirmation() {
      const password = passwordInput.value;
      const passwordConfirm = passwordConfirmInput.value;
      // Vérification de l'égalité des valeurs
      if (password === passwordConfirm) {
        // Les mdp sont identiques
        passwordConfirmInput.setCustomValidity("");
        return true;
      } else {
        // Les mdp sont différents
        passwordConfirmInput.setCustomValidity("Les mots de passe ne correspondent pas");
        return false;
      }
    }
    passwordConfirmInput.addEventListener("keyup", verifyPasswordConfirmation);

    // Vérification de la confirmation du mot de passe lors de la soumission du formulaire
    const form = document.querySelector("#Compteclient");
    form.addEventListener("submit", function(event) {
      if (!verifyPasswordConfirmation()) {
        alert("Les mots de passe ne correspondent pas");
        event.preventDefault(); // Empêche l'envoi du formulaire
      }
    });

    
    
    </script>    
</body>
</html>